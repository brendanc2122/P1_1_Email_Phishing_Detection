<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phishing Email Detector</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <!-- Left: input -->
    <div class="detector-panel">
      <h2>Phishing Email Detector</h2>
      <p class="desc">
        Paste the sender, subject, and body of an email. We’ll score it with rule-based checks server-side and show a normalized 0–100 score.
      </p>

      <form class="email-form">
        <label for="sender">Sender <span class="hint">(*Name &lt;email@domain.com&gt;*)</span></label>
        <input type="text" id="sender" name="sender" placeholder="e.g. PayPal Support &lt;service@paypal.com&gt;" required>

        <label for="subject">Subject</label>
        <input type="text" id="subject" name="subject" placeholder="e.g. URGENT: Verify your account" required>

        <label for="body">Body</label>
        <textarea id="body" name="body" rows="7" placeholder="Paste the email body here..." required></textarea>

        <div class="actions">
          <button type="submit" class="analyze-btn">Analyze</button>

          <div class="threshold-group">
            <label for="threshold">Threshold</label>
            <input type="range" id="threshold" name="threshold" min="0" max="100" value="60">
            <span id="threshold-value">60</span>
          </div>

          <button type="button" class="copy-btn">Copy report</button>
          <button type="button" class="download-btn">Download</button>
        </div>

        <p class="notes">
          Rules used: whitelist check, suspicious keywords (subject & early-body bonuses), lookalike domains, and suspicious URLs (IP or brand mismatch).
        </p>
      </form>
    </div>

    <!-- Right: results -->
    <div class="result-panel">
      <div class="result-header">
        <span>Result</span>
        <span class="threshold-label">Threshold: <span id="result-threshold">60</span></span>
      </div>

      <div class="result-score">
        <span class="score-label">No analysis yet</span>
      </div>

      <div class="breakdown">
        <h4>Breakdown (indicators)</h4>
        <p>No details yet — click Analyze.</p>
      </div>

      <div class="score-contribution">
        <h4>Score contribution</h4>
        <p>No data yet — analyze an email to view contributions.</p>
      </div>

      <div class="threshold-details">
        <h4>Threshold details</h4>
        <ul>
          <li><b>UI threshold</b> (0–100) is converted to raw points internally (≈ 0–{{ 30 if false else 30 }} by default).</li>
          <li>Below threshold → <b>Safe</b>. At/above threshold → <b>Phishing</b>.</li>
          <li>Tune later using your labeled dataset for best precision/recall.</li>
        </ul>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
